# Aunsorm Microservices Environment Configuration

# Network Configuration
COMPOSE_PROJECT_NAME=aunsorm
NETWORK_NAME=aunsorm-network

# Service Ports (Matching compose.yaml actual mappings)
GATEWAY_PORT=50010
AUTH_SERVICE_PORT=50011
CRYPTO_SERVICE_PORT=50012
X509_SERVICE_PORT=50013
KMS_SERVICE_PORT=50014
MDM_SERVICE_PORT=50015
ID_SERVICE_PORT=50016
ACME_SERVICE_PORT=50017
PQC_SERVICE_PORT=50018
RNG_SERVICE_PORT=50019
BLOCKCHAIN_SERVICE_PORT=50020
E2EE_SERVICE_PORT=50021
METRICS_SERVICE_PORT=50022
CLI_GATEWAY_PORT=50023

# Legacy aliases (deprecated - use specific service ports above)
AUNSORM_SERVICE_PORT=50010

# Security Configuration
JWT_SECRET_KEY=change-me-please
JWT_EXPIRES_IN=3600

# Host Configuration (Production override)
# Set ZASIAN_HOST and HOST for production deployment
# ZASIAN_HOST=zasian.production.example
# HOST=aunsorm.production.example

# OAuth Configuration
# OAUTH_PRODUCTION_CALLBACK=https://prod.example.com/oauth/callback

# CLI Configuration
# AUNSORM_SERVER_URL=http://prod.aunsorm.example:8080
# HOSTNAME=prod.aunsorm.example

# Service Configuration (Internal Docker)
# - AUNSORM_LISTEN: Each service binds to its own port (50010-50023)
# - SERVICE_MODE: Each service has its specific mode (gateway, auth-service, etc.)
# - CLI_MAX_FILE_SIZE / CLI_TIMEOUT / AUTH_SERVICE_URL for CLI gateway

# SFU Bridge Configuration (Zasian Media Platform v0.6.0)
BRIDGE_URL=ws://localhost:50031/ws
# ZASIAN_WEBSOCKET_URL=wss://localhost:50036/zasian

# Zasian Integration (JWT and WebRTC)
# JWT_AUDIENCE=zasian-media
# TLS_TERMINATION=gateway

# Database Configuration
DATABASE_URL=sqlite://aunsorm.db

# Logging
RUST_LOG=info
RUST_BACKTRACE=1

# Development Mode
DEV_MODE=false
DEBUG_ENDPOINTS=false

# Clock Attestation
AUNSORM_CALIBRATION_FINGERPRINT=0000000000000000000000000000000000000000000000000000000000000000
AUNSORM_CLOCK_MAX_AGE_SECS=300
AUNSORM_CLOCK_ATTESTATION={"authority_id":"ntp.dev.aunsorm","authority_fingerprint_hex":"0000000000000000000000000000000000000000000000000000000000000000","unix_time_ms":1735689600000,"stratum":2,"round_trip_ms":10,"dispersion_ms":15,"estimated_offset_ms":2,"signature_b64":"bW9jay1hdHRlc3RhdGlvbg"}
# Optional refresh worker
# AUNSORM_CLOCK_REFRESH_URL=https://ntp.example.com/attestation
# AUNSORM_CLOCK_REFRESH_INTERVAL_SECS=15

# Calibration & Clock Attestation Notes
# - Production should use AUNSORM_CLOCK_MAX_AGE_SECS=30
# - Ensure fingerprints match the attestation authority certificate
# - unix_time_ms will be refreshed automatically by the service when a refresh URL is configured
